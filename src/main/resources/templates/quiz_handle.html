<!doctype html>
<html xmlns:th="https://www.thymeleaf.org">

<head>
    <title>Course List - G3Learn</title>
    <th:block th:replace="fragments/meta_head :: meta_head"></th:block>
    <style>
        @media screen and (min-width: 676px) {
            .modal-dialog {
                max-width: 700px; /* New width for default modal */
            }
        }
    </style>
</head>

<body>
<!-- body wrap start -->
<div class="body_wrap bg-white">
    <div th:include="fragments/navbar:: manage_course_navbar"></div>

    <main class="container py-5">
        <h1 class="mb-4">Quiz Title</h1>
        <span>Description: Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab, exercitationem inventore ipsam laudantium nemo nostrum quae! Iure possimus quis sequi.</span><br>
        <span>Quiz level: Easier than Easy</span><br>
        <span>Quiz Type: No type</span><br>
        <span>Number of questions: 20</span><br>
        <div class="row">
            <div class="col">
                <span>80% or higher to pass</span>
            </div>
            <div class="col text-end">
                Time left: <span id="time-left" class="fs-3 fw-bold"></span>
            </div>
        </div>
        <hr>
        <form th:action="'/quiz-handle/' + ${quizId} + '/submit'" method="post" id="submit-form">
        <div class="question-box mb-3" th:each="question, iter : ${questionList}">
            <h3 class="question-content" th:text="'Question ' + ${iter.count} + ': ' + ${question.content}"></h3>
            <div class="form-check">
                <input class="form-check-input" type="radio" th:name="'q' + ${question.id}" th:id="'q' + ${question.id} + '-1'" th:value="${question.option1}" style="padding: 0;">
                <label class="form-check-label" th:for="'q' + ${question.id} + '-1'" th:text="' ' + ${question.option1}">
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" th:name="'q' + ${question.id}" th:id="'q' + ${question.id} + '-2'" th:value="${question.option2}" style="padding: 0;">
                <label class="form-check-label" th:for="'q' + ${question.id} + '-2'" th:text="' ' + ${question.option2}">
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" th:name="'q' + ${question.id}" th:id="'q' + ${question.id} + '-3'" th:value="${question.option3}" style="padding: 0;">
                <label class="form-check-label" th:for="'q' + ${question.id} + '-3'" th:text="' ' + ${question.option3}">
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" th:name="'q' + ${question.id}" th:id="'q' + ${question.id} + '-4'" th:value="${question.option4}" style="padding: 0;">
                <label class="form-check-label" th:for="'q' + ${question.id} + '-4'" th:text="' ' + ${question.option4}">
                </label>
            </div>
        </div>
            <input type="hidden" name="currentUserQuizId" th:value="${currentUserQuiz.id}">
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>



    </main>

    <th:block th:replace="fragments/footer :: footer">

    </th:block>

</div>

<th:block th:replace="fragments/js_lib :: js_lib">
</th:block>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script>
    var div = document.getElementById('time-left');

    function CountDown(duration, display) {

        var timer = duration, minutes, seconds;

        var interVal=  setInterval(function () {
            minutes = parseInt(timer / 60, 10);
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            display.innerHTML ="<b>" + minutes + "m : " + seconds + "s" + "</b>";
            if (timer > 0) {
                --timer;
            }else{
                clearInterval(interVal)
                SubmitFunction();
            }

        },1000);

    }

    function SubmitFunction(){
        alert("Time is up! Auto submitting...")
        document.getElementById('submit-form').submit();

    }
    CountDown([[${timeLeft}]],div);
</script>
</body>

</html>